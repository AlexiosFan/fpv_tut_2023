\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{graphicx}

\title{A brief introduction to predicate logic \footnote{This is unofficial material generated by tutors. 
Please follow the lecture notes for the accurate information. The materials are based on the lecture notes 
of the course Logic(IN2049) by Prof. Esparza and Prof. Nipkow}}

\begin{document}

\maketitle

\section*{Predicates}
\begin{enumerate}
    \item Predicates are logical formulas that contain variables and constants. Variables are usually given by $x, y, z$, whereas constants are integers in context of Mini-Java.
    \item Besides the property of propositional logical formulas, predicates are usually definied with variables.
    $P(x)$ is a predicate describing the property of variable x. $x = 0$, $x + 1 < 2$, and $x + y = 0 \land x < 0$ are all 
    predicates of x.
    \item A predicate may contain more than one variables. The number of the variables in the predicate is
    called the arity of the predicate. For example $P(x, y, z)$ has the arity of 3.
    \item With the existence of $<$ relation, we can also apply the related rules to simplify the logical formula. For example
    \begin{align*}
        &\; (a > 0 \lor x + y > 0) \land (a \leq 0 \lor x + y > 0)\\
        \equiv& \; (a > 0 \land a \leq 0) \lor x + y > 0\\
        \equiv& \; \text{true} \lor x + y > 0\\
        \equiv& \; x + y > 0\\
    \end{align*}
    We may also apply the \textbf{reflexity, symmetry} and \textbf{transitivity} when necessary.
    \begin{align*}
        \exists a. b < a \land a < c \Longrightarrow b < c
    \end{align*}
\end{enumerate}



\section*{Quantifiers}
\begin{enumerate}
    \item There are two different quantifiers, the universal quantifier $\forall$ and the existential quantifier $\exists$.
    Each quantifier is always followed by a predicate. In this course, you may only need the universal quantifier.
    \item Quantifiers bind variables, the scope of the quantifier is all the subformula on the right handside. 
    \begin{table}[ht]
        \centering 
        \begin{tabular}{|| p{2.5cm} | p{8cm} ||}
            \hline 
            formulas & explanations \\
            \hline \hline
            $\forall x. x > 0$ & $x$ is bound by the universal quantifier. \\
            \hline 
            $\forall x \exists y. x > y$ & $x$ is bound by the universal quantifier, 
              y is bound by the existential quantifier.\\
            \hline
            $\forall x \exists x. x > 0$ & $x$ is bound by the existential quantifier, 
              the leftest quantifier has larger priority.\\
            \hline 
        \end{tabular}
        \caption[Table 2]{Boundness of formulas}
    \end{table}
    \item Rectified formula. A formula is rectified if variable occurs bound and free and if all quantifiers
    in the formula bind the same variables. 
    \begin{table}[ht]
        \centering 
        \begin{tabular}{|| p{5cm} | p{2.5cm} ||}
            \hline 
            formulas & rectifiedness \\
            \hline \hline
            $\forall x \forall y. x + y > c$ & Yes \\
            \hline 
            $x > 0 \land \forall x . x < 42 $ & No \\
            \hline
            $\forall x. x < 42 \land \forall x. x > 13$ & No\\
            \hline 
        \end{tabular}
        \caption[Table 2]{Rectifiedness of formulas}
    \end{table}
    If you find a logical formula hard to read,
    you may transform the formula to a rectified formula. The transformation is possible by renaming the duplicated binding 
    with a new variable, which does not exist in the current formula.
    \begin{align*}
        \forall x \exists x. x > 0 &\longrightarrow \forall x \exists y. y > 0\\
        x > 0 \land \forall x. x < 42 &\longrightarrow x > 0 \land \forall y. y < 42\\
        \forall x. x < 42 \land \forall x. x > 13 &\longrightarrow \forall x. x < 42 \land \forall y. y > 13
    \end{align*}
\end{enumerate}

\section*{Substitutions}
\begin{itemize}
    \item Substitutions replace \textbf{free} variables with terms. $A[a/y]$ reads substitute y for a in $A$.
    \item The bound variables are not substituted, for example
    \begin{align*}
        (x > 0 \land \forall x. x > 0)[1/x] \equiv 1 > 0 \land \forall x.  x > 0
    \end{align*}
    \item You cannot substitute a constant for a variable or another constant.
\end{itemize}

\section*{Problem set}
You may use this problem set to test your knowledge about the predicate logic. The problems are 
\textbf{not} directly related to the exam, but you may find them useful for understanding 
the contents.
\subsection*{Predicates and Relations}
\begin{enumerate}
    \item Let $x$ be a variable. What is the \textbf{minimal} arity of the predicate $x = y$ when y is a variable and when 
    y is not a variable?
    \item Can a predicate have an arity of \textbf{zero}? 
    \item What is the \textbf{maximum} of the arity of a predicate?
    \item What are the \textbf{reflexity, symmetry} and \textbf{transitivity} of a relation?
    \item Given an order $a \leq b \leq c$, transform it into a conjunction of relations.
    \item If we want to derive \textbf{false} from a logical formula with the relations of integers,
    what should we look for?
\end{enumerate}
\subsection*{Quantifiers}
In the following formulas, name by which quantifier is each $x$ bounded and transform them into rectified formulas.
\begin{enumerate}
    \item $\forall x \exists x \forall x. x + 1 > 0$
    \item $x > 0 \land \forall x. x < 0 \land (\exists x. x \not=0) \lor x < 0$
    \item $x > 0 \land \forall x \exists x \forall x. x < 0 \land \forall x. x > 42$
\end{enumerate}
\subsection*{Substitutions}
For each formulae $F$ given in the previous exercise, perform the substitution $F[1/x]$ and 
simplify it as far as you can. \textbf{(Do not simplify the quantifiers here)}
\subsection*{Advanced}
This part includes some advanced questions, which are not related to the \textbf{FPV} lecture. They 
may be inspiring if you are interested.
\begin{enumerate}
    \item Sometimes, we want to state a property or relation about a function, for example, $\forall x. f(x) > 0$. How can we elaborate
    the rectifying rule with the existence of a function?
    \item In rectified formulas, the quantifiers are also existent inside the subformulas. The formula are 
    hence less readable. Do you think of any way to improve this?
\end{enumerate}

\newpage 
\section*{Sample solutions}
\subsection*{Predicates and Substitutions}
\begin{enumerate}
    \item 1 if y is a variable, otherwise 2.
    \item Yes. For arity 0, we write $P$ instead of $P()$. 
    For example, $P :\equiv 1 = 1$ is a trivial property without the existence of any variable.
    \item There is no upperbound, thus $\infty$. See an example, $P(x, y) :\equiv x > 0$. 
    There is no existence of $y$ in $P$, but you can still include it. Using the similar 
    construction, we may add as many variables as we want.
    \item For a relation $\leq$
    \begin{itemize}
        \item reflexity: $a \leq a$
        \item symmetry: $a \leq b \iff b \leq a$
        \item transitivity $a \leq b \land b \leq c \Longrightarrow a \leq c$
    \end{itemize}
    The symbol of the relation does not matter, you may replace it with $=, \not=$ or whatever you want/define.
    \item $a \leq b \land b \leq c \land a \leq c$
    \item Any contradictory formula, for example, $a < x \leq a, x = a \land x \not= a$ etc.
\end{enumerate}
\subsection*{Quantifiers and Substitutions}
\begin{enumerate}
    \item Bound by the third quantifier from the left. 
    \begin{align*}
        \forall x \exists y \forall z. z + 1 > 0
    \end{align*}
    Identical after the substitution.
    \item The first and the last $x$ are free. The second is bound by the universal quantifier, and 
    the third is bound by the existential quantifier.
    \begin{align*}
        &x > 0 \land \forall y. y < 0 \land (\exists z. z \not= 0) \lor x < 0\\
        &(x > 0 \land \forall y. y < 0 \land (\exists z. z \not= 0) \lor x < 0)[1/x]\\
        \equiv&\; 1 > 0 \land \forall y. y < 0 \land (\exists z. z \not= 0) \lor 1 < 0\\ 
        \equiv&\;  \forall y. y < 0 \land (\exists z. z \not= 0)
    \end{align*}
    \item The first $x$ is free. the second is bound by the third quantifier from the left. 
    The third is bound by the fourth quantifier from the left.
    \begin{align*}
        &x > 0 \land \forall x_1 \exists x_2 \forall x_3. x_3 < 0 \land \forall x_4. x_4 > 42\\
        &(x > 0 \land \forall x_1 \exists x_2 \forall x_3. x_3 < 0 \land \forall x_4. x_4 > 42)[1/x]\\
        \equiv& \; 1 > 0 \land \forall x_1 \exists x_2 \forall x_3. x_3 < 0 \land \forall x_4. x_4 > 42 \\
        \equiv& \; \forall x_1 \exists x_2 \forall x_3. x_3 < 0 \land \forall x_4. x_4 > 42
    \end{align*}
\end{enumerate}

\subsection*{Advanced}
You may refer to the slides of the \textbf{Logic(IN2049)} lecture for the answer. The answers are accessible via 
\hyperref[https://www21.in.tum.de/teaching/logic/SS22/assets/fol.pdf]{the link for question 1)} 
and this \hyperref[https://www21.in.tum.de/teaching/logic/SS22/assets/normal-fol.pdf]{the link for question 2)}.

\end{document}